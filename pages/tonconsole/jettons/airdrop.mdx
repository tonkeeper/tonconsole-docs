import { Callout } from 'nextra-theme-docs';

# Jetton Airdrop

Service enables a mass token distribution model where the recipient pays a fixed fee in TONs and receives Jettons.
The distribution is carried out to a fixed list of recipients. In the following, we will refer to the Jetton distribution process as an **Airdrop**.

## How it works
1. The Airdrop organizer (**Airdrop admin**) prepares a file with a fixed list of Jetton recipients
2. The Airdrop admin creates a new project in Ton Console and fills in the airdrop data
3. The Airdrop admin connects his wallet via TON Connect (in Ton Console) and deploys the Airdrop smart contracts
4. The Airdrop admin on his hosting raises a dapp that allows the recipient to connect his wallet and receive Jettons by paying a commission

## Airdrop file preparation

### File format requirements
1. CSV format with a comma delimiter
2. Contain a header in the format: `recipients, amount`
3. Token amount in minimal indivisible units (example: `1000000` for 1 USDT where decimals=6). The value must be positive, and decimal points are not allowed
4. Recipient wallet addresses in user-friendly or raw format ([Address formats](https://docs.ton.org/v3/documentation/smart-contracts/addresses#raw-and-user-friendly-addresses)) with no duplicates
5. File size no more than 500 MB (~ 6,400,000 records). More upon individual request

### File example
```csv
recipient,amount
0:d0ef5351eb05503c10a447543113b315e772d147c51aaa81aa308b5cae99e07e,2567953998
0:199b41bcda2472b057d72f80e2e8ba5e15dcb776e68c9eeea393dad668248068,3127429615
0:aa1e7af003374652e13f705b8c7010b3cf8708f5f98f43c999b8ec4e2c0e0cdf,562536354
```

## Jetton for distribution

To create an Airdrop you will need to specify the address of the Jetton master contract ([Jetton Architecture](https://docs.ton.org/v3/guidelines/dapps/asset-processing/jettons#jetton-architecture)) in user-friendly or raw format.
For example: Notcoin address is EQAvlWFDxGF2lXm67y4yzC17wYKD9A0guwPkMs1gOsM__NOT ([Tonviewer](https://tonviewer.com/EQAvlWFDxGF2lXm67y4yzC17wYKD9A0guwPkMs1gOsM__NOT)).

If you have created a Jetton not based on the standard smart contract or are sending a Jetton minted by someone else, be cautious.
Custom smart contract logic may disrupt the distribution process (e.g. due to unreasonably high transfer fees). Use only trusted Jettons.

<Callout type="warning" emoji="ðŸš¨">
  Before starting distributions with new Jettons, be sure to conduct a test run with a small number of recipients.
</Callout>

## Claim Fee

This is a key airdrop setting. It determines how much the user will pay to claim and how much TON the organizers will receive.

When a user signs a claim message via Ton Connect, they pay a `Claim fee` in TON for the distribution contract to accept the message.
In addition to the fee, the user also pays a network fee for sending this message.

Example:
```
claim_fee = 0.15 TON
blockchain_fee(forward_fee + gas_fee + ...) = ~0.0076 TON
user_pays = claim_fee + blockchain_fee = 0.15 + ~0.0076 = ~0,1576 TON
```

## Profit sharing

The `Claim fee` is used to cover all network fees incurred during the claim process, and the remainder of this amount is sent to special distribution smart contracts.

Example of a claim operation in the testnet: [Tonviewer](https://testnet.tonviewer.com/transaction/7076abbeb1a4e614965ed5f97b8e400bb2227aca54a72b60f2e373d2d0a92207).

In the given example, the distributor contract will receive `excess` = 0.1147384 TON.
Real balance change = +0.112809142 TON and slightly less than `excess` due to blockchain fees. You can estimate it in the `Value flow` tab.

The TONs received by the distributor contract is divided in the following proportion:
`royalty_receiver_share = fraction * excess` and the remaining amount is the `admin_share`.

Check with the [t.me/tonrostislav](https://t.me/tonrostislav)([rostislav.r@tonkeeper.com](mailto:rostislav.r@tonkeeper.com)) for the current values of coefficient `fraction`.

<Callout type="warning" emoji="ðŸš¨">
  Keep in mind that blockchain fees may vary depending on the Jettons contracts and other factors (e.g., the presence of a deployed Jetton wallet for the recipient).
  Therefore, the provided values are approximate. For more accurate estimates, you can conduct test Airdrop.
</Callout>

## Deploying a dApp for users to claim tokens

Airdrop organizers should deploy a dApp on their side (website, landing page) where the claim recipient can connect their wallet via Ton Connect and sign a claim message.

<Callout type="warning" emoji="ðŸš¨">
  Only the account specified in the initial Airdrop CSV file can claim. 
  The Airdrop CSV file must include addresses that are wallets in the TON blockchain supported by the Ton Connect protocol.
</Callout>

### Test claim button

<Callout type="warning" emoji="ðŸš¨">
  It is used for testing purposes and leads to a reference implementation of the application. 
  Do not use it for production distribution, as it is not intended for that and does not guarantee reliable operation.
</Callout>
