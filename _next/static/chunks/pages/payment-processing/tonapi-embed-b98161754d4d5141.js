(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5026],{9100:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment-processing/tonapi-embed",function(){return n(9064)}])},9064:function(e,s,n){"use strict";n.r(s),n.d(s,{__toc:function(){return o}});var t=n(5893),r=n(6997),i=n(2643);let o=[{depth:2,value:"Demo instance",id:"demo-instance"},{depth:2,value:"Glossary",id:"glossary"},{depth:2,value:"Description of the current service functionality",id:"description-of-the-current-service-functionality"},{depth:2,value:"API methods",id:"api-methods"},{depth:3,value:"GET Transfers history",id:"get-transfers-history"},{depth:3,value:"GET Transfer by Hash",id:"get-transfer-by-hash"},{depth:3,value:"GET Balance",id:"get-balance"},{depth:3,value:"Add tracking Address",id:"add-tracking-address"},{depth:3,value:"Resolve domain",id:"resolve-domain"},{depth:3,value:"Status",id:"status"},{depth:3,value:"Methods for withdrawals",id:"methods-for-withdrawals"}];function _createMdxContent(e){let s=Object.assign({h1:"h1",p:"p",h2:"h2",a:"a",ol:"ol",li:"li",em:"em",strong:"strong",code:"code",ul:"ul",h3:"h3"},(0,i.a)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{children:"TonAPI Embed"}),"\n",(0,t.jsx)(s.p,{children:"A service for indexing blockchain data related to the transfers of funds (TON and Jettons).\nDesigned for self-hosted use and integration into the infrastructure of CEX and services that process deposits and withdrawals on the TON blockchain.\nThe service requires a connection to one or more nodes of the TON network."}),"\n",(0,t.jsx)(s.h2,{id:"demo-instance",children:"Demo instance"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://demo-embed.tonapi.io/",children:"https://demo-embed.tonapi.io/"})}),"\n",(0,t.jsx)(s.h2,{id:"glossary",children:"Glossary"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Message"})})," - A message is a packet of data sent between actors (users, applications, smart contracts) on TON blockchain. ",(0,t.jsx)(s.a,{href:"https://docs.ton.org/develop/smart-contracts/guidelines/message-delivery-guarantees",children:"https://docs.ton.org/develop/smart-contracts/guidelines/message-delivery-guarantees"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Jetton"})})," - fungible token on the TON blockchain."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Wallet smart contract"})})," - specialized smart contract designed specifically for wallet apps and to be used by end users."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit address"})})," - address in TON blockchain to which funds can be received and from which funds can be withdrawn."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contract"})})," - a smart contract on the TON blockchain that can hold the balance of some asset (TON or Jetton). It is usually (but not always) a ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Wallet smart contract."})})," The address of the recipient is not always the same as the address of the smart contract where the asset is actually stored. For example, for Jettons, the recipient address is the smart contract address of the Jetton wallet owner."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transaction"})})," - low-level entity in the TON network. A transaction is an operation that processes inbound and can create outbound messages related to a specific account, altering its state and potentially generating fees for validators. ",(0,t.jsx)(s.a,{href:"https://docs.ton.org/develop/data-formats/transaction-layout",children:"https://docs.ton.org/develop/data-formats/transaction-layout"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transfer"})})," - abstract entity describing the movement of funds between ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contracts."})})," Contains information about the sender, recipient, amount, etc. This information can be derived from several low-level entities in the TON blockchain, such as ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Messages"})})," and ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transactions"})}),"."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Centralized deposit address"})})," - a ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit address"})})," to receive funds from many users. Usually requires the use of a memo to accept payments to this address."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Individual deposit address"})})," - a ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit address"})})," to receive funds from one user. The use of a memo is not required."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Withdrawal"})})," - the action of sending funds from one ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contract"})})," to another by sending a ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Message"})})," to the TON blockchain."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Liteserver Node"})})," - a node in the TON network that provides an API for external services to interact with TON."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsxs)(s.strong,{children:[(0,t.jsx)(s.em,{children:"Archive Node"})," - ",(0,t.jsx)(s.em,{children:"Liteserver Node"})]})," that stores historical blockchain data**.**"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Private key"})})," - ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Wallet smart contract"})})," private key or seed phrase for signing withdrawal ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Message"})}),". One private key can manage several wallets."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"TEP74"})})," - standard for fungible tokens in the TON blockchain. ",(0,t.jsx)(s.a,{href:"https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md",children:"https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"LT"})})," (logical time) - blockchain specific and account specific counter to organize messages and transactions monotonically increases (but contains gaps) for any given account (",(0,t.jsx)(s.a,{href:"https://docs.ton.org/develop/smart-contracts/guidelines/message-delivery-guarantees#what-is-a-logical-time",children:"https://docs.ton.org/develop/smart-contracts/guidelines/message-delivery-g"}),")"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Jetton address"})})," (Jetton master contract address) - for better scaling, the Jetton contract (master contract) in the TON blockchain does not store information about the users' balance, but only general information about the token itself. User balance information is stored by a separate smart wallet token contract. Which in our case is considered a deposit.\nWhen we talk about a particular ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Jetton"})})," in general, we identify it by the address of the master contract. ",(0,t.jsx)(s.a,{href:"https://docs.ton.org/develop/dapps/asset-processing/jettons#jetton-architecture",children:"https://docs.ton.org/develop/dapps/asset-processing/jettons#jetton-architecture"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Fee"})})," - fee charged in TON by the TON network when processing a transaction. It has a complex structure and depends on a large number of factors. In this regard, it is difficult to predict the exact size of the commission and to calculate the sum value. ",(0,t.jsx)(s.a,{href:"https://docs.ton.org/develop/smart-contracts/fees",children:"https://docs.ton.org/develop/smart-contracts/fees"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Minimum indivisible units"})})," - a measure of the quantity of TON or ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Jettons"})})," in which the quantity is always an integer. For a TON, it is nanoTON. The position of the decimal point when converting an amount of ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Minimum indivisible units"})})," is determined by the ",(0,t.jsx)(s.code,{children:"decimals"})," Jetton parameter."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Masterchain block"})})," - Block of Masterchain. The Masterchain is the primary chain that stores the network configuration and the final state of all workchains. You can understand this as the masterchain being the core directory, a single source of truth for all the shards in the ecosystem. This block is selected as a synchronization point to refer to a specific smart contract state."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"description-of-the-current-service-functionality",children:"Description of the current service functionality"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["The service is designed to track deposits and withdrawals at one or several ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Centralized deposit addresses"})})," for TON and Jettons."]}),"\n",(0,t.jsx)(s.li,{children:"The API structure, composition and format of returned data can be changed upon customer's request."}),"\n",(0,t.jsxs)(s.li,{children:["The service requires access to one or more ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Liteserver Nodes/Archive Nodes"})})," (not necessarily trusted ones, since the service has proof check)."]}),"\n",(0,t.jsxs)(s.li,{children:["The service provides a REST API with a set of methods to track the movement of funds on a given pool of ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit addresses"})}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Service scans ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transfers"})})," until the moment of ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contract"})})," creation, therefore, when scanning ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contract"})})," with a long history you will need access to the ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Archive node"})}),"."]}),"\n",(0,t.jsx)(s.li,{children:"Specific service performance and health metrics can be added on request."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"api-methods",children:"API methods"}),"\n",(0,t.jsxs)(s.p,{children:["You can get Swagger file here: ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"https://demo-embed.tonapi.io/openapi.yaml",children:"Swagger file"})})," ",(0,t.jsx)("br",{}),"\nYou can use Swagger UI to explore the API methods: ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"https://demo-embed.tonapi.io/",children:"Swagger UI"})})]}),"\n",(0,t.jsx)(s.h3,{id:"get-transfers-history",children:"GET Transfers history"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"GET /account/{address}/history"})," ",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(s.code,{children:"GET /jetton/{jetton}/{address}/history"})]}),"\n",(0,t.jsxs)(s.p,{children:["Methods for obtaining the ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transfer"})})," history (with pagination) for a specific ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit address"})}),"."]}),"\n",(0,t.jsx)(s.p,{children:"Returns the following data:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Address of sender and recipients"}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Jetton address"})})}),"\n",(0,t.jsxs)(s.li,{children:["Amount of transferred TON and Jettons in ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Minimum indivisible units"})})," of measurement"]}),"\n",(0,t.jsx)(s.li,{children:"Unix timestamp"}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"LT"})})," (logical time)"]}),"\n",(0,t.jsxs)(s.li,{children:["Hash of ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transaction"})})," (as a unique identifier for this transfer)"]}),"\n",(0,t.jsxs)(s.li,{children:["Text comment from the ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Message"})})," (if any)"]}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Fee"})})}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"get-transfer-by-hash",children:"GET Transfer by Hash"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"GET /account/{address}/history/{hash}"})," ",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(s.code,{children:"GET /jetton/{jetton}/{address}/history/{hash}"})]}),"\n",(0,t.jsxs)(s.p,{children:["Methods for obtaining a specific ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transfer"})})," by ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transaction"})})," hash."]}),"\n",(0,t.jsx)(s.h3,{id:"get-balance",children:"GET Balance"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"GET /account/{address}"})," ",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(s.code,{children:"GET /jetton/{jetton}/{address}"})]}),"\n",(0,t.jsxs)(s.p,{children:["Methods for obtaining the ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contract"})})," balance (TON or Jetton) for the last ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Masterchain block"})})," known to the service."]}),"\n",(0,t.jsxs)(s.p,{children:["The last known ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Masterchain block"})})," depends on the synchronization of the node with the TON blockchain."]}),"\n",(0,t.jsx)(s.p,{children:"Returns the following data:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Balance in ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Minimum indivisible units"})})," of measurement"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Masterchain block"})})," seqno"]}),"\n",(0,t.jsxs)(s.li,{children:["Last ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"LT"})})," - identifies the last known ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transaction"})})," on the ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contract"})})]}),"\n",(0,t.jsxs)(s.li,{children:["Last processed transaction ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"LT"})})," - identifies the last processed ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transaction"})})," on the ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contract"})}),", which is included in the ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Transfer"})})," history"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"add-tracking-address",children:"Add tracking Address"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"POST /account/{address}"})," ",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(s.code,{children:"POST /jetton/{jetton}/{address}"})]}),"\n",(0,t.jsxs)(s.p,{children:["Methods to add a new ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit address"})})," for tracking. Since a Jetton ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Wallet"})})," in the TON blockchain is a separate smart contract, when adding a Jetton ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contract"})})," to tracking, the owner of this wallet (also a smart contract) is added to the tracking as a TON ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"Deposit smart contract"})}),". The owner of the Jetton wallet pays fees for Jetton withdrawals."]}),"\n",(0,t.jsx)(s.h3,{id:"resolve-domain",children:"Resolve domain"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"GET /resolve/{domain}"})}),"\n",(0,t.jsxs)(s.p,{children:["Method for resolving domain names on the TON blockchain (presented as NFT), such as ",(0,t.jsx)(s.code,{children:"wallet.ton"}),". Does not work for any domain name, but for a name that has a corresponding DNS record. Returns the address of the contract specified in the DNS record."]}),"\n",(0,t.jsx)(s.h3,{id:"status",children:"Status"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"GET  /status"})}),"\n",(0,t.jsx)(s.p,{children:"A method for obtaining the current service health and lag when indexing data from the chain."}),"\n",(0,t.jsx)(s.h3,{id:"methods-for-withdrawals",children:"Methods for withdrawals"}),"\n",(0,t.jsxs)(s.p,{children:["Methods for constructing and controlling ",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.strong,{children:"withdrawals"})})," are added upon request based on customer requirements."]})]})}s.default=(0,r.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.a)(),e.components);return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/payment-processing/tonapi-embed.mdx",route:"/payment-processing/tonapi-embed",timestamp:1742223352e3,title:"TonAPI Embed",headings:o},pageNextRoute:"/payment-processing/tonapi-embed"})}},function(e){e.O(0,[6997,9774,2888,179],function(){return e(e.s=9100)}),_N_E=e.O()}]);