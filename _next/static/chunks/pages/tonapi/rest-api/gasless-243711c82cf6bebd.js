(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7606],{6470:function(s,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tonapi/rest-api/gasless",function(){return t(1624)}])},1624:function(s,e,t){"use strict";t.r(e),t.d(e,{__N_SSG:function(){return l},__toc:function(){return c}});var n=t(5893),a=t(6997),r=t(2643),i=t(5867),o=t(7678),l=!0;let c=[{depth:3,value:"Architecture",id:"architecture"},{depth:3,value:"Process for Executing",id:"process-for-executing"},{depth:3,value:"Gasless transactions",id:"gasless-transactions"},{depth:3,value:"Implementation Example",id:"implementation-example"},{depth:2,value:"Operations",id:"operations"}];function _createMdxContent(s){let e=Object.assign({h1:"h1",p:"p",strong:"strong",h3:"h3",ol:"ol",li:"li",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",a:"a",h2:"h2"},(0,r.a)(),s.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h1,{children:["Gasless",(0,n.jsx)(i.y2,{tag:o.Sz.GASLESS})]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Gasless transactions"})," on the TON platform enable users to send transactions without paying gas fees directly from their wallets. This is achieved using ",(0,n.jsx)(e.strong,{children:"Signed Internal Messages"})," sent through a ",(0,n.jsx)(e.strong,{children:"gas proxy contract"}),", which covers the transaction fees on behalf of the user. This approach simplifies blockchain interactions, making it easier for users who may not have TON tokens in their wallets."]}),"\n",(0,n.jsxs)(e.p,{children:["This service only works with ",(0,n.jsx)(i.dL,{href:o.MK.W5_SPECIFICATION,children:"W5 wallets"})]}),"\n",(0,n.jsx)(e.h3,{id:"architecture",children:"Architecture"}),"\n",(0,n.jsxs)(e.p,{children:["Gasless transactions leverage ",(0,n.jsx)(e.strong,{children:"Signed Internal Messages"}),". These messages are signed by the user but routed through a smart contract that pays the fees using a ",(0,n.jsx)(e.strong,{children:"gas proxy"}),". This eliminates the need for users to hold TON tokens for transaction fees."]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"TONAPI"})," plays a critical role by simulating transaction execution to accurately estimate fees and sending the transaction to multiple validators to increase the chances of successful processing. Additionally, ",(0,n.jsx)(e.strong,{children:"TONAPI"})," ensures that the userâ€™s wallet and gas proxy contract are in the same shard, minimizing latency and ensuring fast transaction processing."]}),"\n",(0,n.jsx)(e.h3,{id:"process-for-executing",children:"Process for Executing"}),"\n",(0,n.jsxs)(e.ol,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Fetch Configuration:"})," Request the gasless transaction parameters using ",(0,n.jsx)(e.code,{children:"/v2/gasless/config"}),"."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Estimate Transaction:"})," Send a POST request to ",(0,n.jsx)(e.code,{children:"/v2/gasless/estimate/{master_id}"})," to receive a payload for signing."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Sign Payload:"})," Sign the received payload with your private key."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Send Transaction:"})," Submit the signed message via POST to ",(0,n.jsx)(e.code,{children:"/v2/gasless/send"}),"."]}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:"gasless-transactions",children:"Gasless transactions"}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"TONAPI"})," supports several gasless transaction types referred to as gasless protocols:"]}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Gasless protocol"}),(0,n.jsx)(e.th,{children:"Description"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"gasless"}),(0,n.jsx)(e.td,{children:"Gasless Transfer involves two transactions: the primary Jetton transfer and a secondary transfer that covers the gas fees. The secondary transfer (commission) must be paid using a limited set of Jettons (refer to the gaslessConfig method for the complete list), while the primary transfer can use any Jetton."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"gasless-swap"}),(0,n.jsx)(e.td,{children:"Gasless Swap consists of two transactions: the swap itself and an additional Jetton transfer that covers gas fees. Currently, the protocol supports only Stonfi swaps. Ensure that any excess funds from the swap are directed to the TONAPI relayer, as this will reduce the overall commission."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"gasless-generic-transfer"}),(0,n.jsx)(e.td,{children:"Gasless Generic Transfer consists of a primary Jetton transfer that can include any payload, along with a separate transaction to cover the commission. Gasless Swap differs from Gasless Generic Transfer in that our swap emulation is highly reliable. This accuracy allows us to optimize commission fees by adjusting for any excess funds returned to our relayers."})]})]})]}),"\n",(0,n.jsx)(e.p,{children:"The commission is always processed as a separate transfer and must be paid using one of the supported Jettons.\nBoth the gaslessSend and gaslessEstimate methods include the protocol used in their responses."}),"\n",(0,n.jsx)(e.h3,{id:"implementation-example",children:"Implementation Example"}),"\n",(0,n.jsxs)(e.p,{children:["A detailed example of gasless transaction implementation is available in the ",(0,n.jsx)(e.a,{href:"/tonapi/cookbook#gasless-transfer",children:"Cookbook"}),", showcasing the approach across multiple programming languages."]}),"\n",(0,n.jsx)(e.h2,{id:"operations",children:"Operations"}),"\n",(0,n.jsx)(i.ip,{tag:o.Sz.GASLESS})]})}e.default=(0,a.j)({MDXContent:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,r.a)(),s.components);return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(_createMdxContent,{...s})}):_createMdxContent(s)},pageOpts:{filePath:"pages/tonapi/rest-api/gasless.mdx",route:"/tonapi/rest-api/gasless",hasJsxInH1:!0,timestamp:174246024e4,title:"Gasless",headings:c},pageNextRoute:"/tonapi/rest-api/gasless"})}},function(s){s.O(0,[6997,9774,2888,179],function(){return s(s.s=6470)}),_N_E=s.O()}]);