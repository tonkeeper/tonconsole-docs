(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9229],{5431:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tonkeeper/signer",function(){return r(1054)}])},1054:function(e,n,r){"use strict";r.r(n),r.d(n,{__toc:function(){return c}});var i=r(5893),s=r(6997),t=r(2643),d=r(8757),a=r(9013);let c=[{depth:2,value:"Features",id:"features"},{depth:2,value:"Privacy-friendly",id:"privacy-friendly"},{depth:2,value:"Secure",id:"secure"},{depth:2,value:"Decoded payload preview",id:"decoded-payload-preview"},{depth:2,value:"Interfaces",id:"interfaces"},{depth:2,value:"Protocol",id:"protocol"},{depth:3,value:"Sign the transaction (from Tonkeeper → Signer)",id:"sign-the-transaction-from-tonkeeper--signer"},{depth:4,value:"Parameter return",id:"parameter-return"},{depth:3,value:"Return signed transaction (Signer → Tonkeeper)",id:"return-signed-transaction-signer--tonkeeper"},{depth:3,value:"Pairing (Signer → Tonkeeper)",id:"pairing-signer--tonkeeper"},{depth:3,value:"QR code specification",id:"qr-code-specification"},{depth:3,value:"Interaction diagram",id:"interaction-diagram"},{depth:4,value:"Deeplink linking",id:"deeplink-linking"},{depth:4,value:"QR Code linking",id:"qr-code-linking"},{depth:4,value:"Deeplink signing",id:"deeplink-signing"},{depth:4,value:"QR code signing",id:"qr-code-signing"}];function _createMdxContent(e){let n=Object.assign({h1:"h1",p:"p",a:"a",h2:"h2",ul:"ul",li:"li",strong:"strong",h3:"h3",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",br:"br",h4:"h4"},(0,t.a)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{children:"Signer"}),"\n",(0,i.jsx)(a.UW,{type:"warning",emoji:"\uD83D\uDEA8",children:(0,i.jsx)(n.p,{children:"This page is a draft."})}),"\n",(0,i.jsxs)(n.p,{children:["Open source secure mobile app for cold managing ",(0,i.jsx)(n.a,{href:"https://ton.org/",children:"TON crypto"})," wallet keys and signing blockchain transactions, designed to operate completely offline."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/tonkeeper/android/tree/main/apps/signer",children:"Signer GitHub repo"})}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Operates offline, compatible with ",(0,i.jsx)(n.a,{href:"https://tonkeeper.com/",children:"Tonkeeper"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Supports multiple keys."}),"\n",(0,i.jsx)(n.li,{children:"Enables transaction signing directly within safe area in SignerApp."}),"\n",(0,i.jsx)(n.li,{children:"Encrypts keys using your personal password for maximum security."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"privacy-friendly",children:"Privacy-friendly"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No internet access required, ensuring no data is upload."}),"\n",(0,i.jsx)(n.li,{children:"Does not collect analytics or log user activity."}),"\n",(0,i.jsx)(n.li,{children:"Encrypts all secure data with your password, making it accessible only to you."}),"\n",(0,i.jsx)(n.li,{children:"Private keys never leave app, exported, copied, etc."}),"\n",(0,i.jsx)(n.li,{children:"Our developers cannot access your data."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"secure",children:"Secure"}),"\n",(0,i.jsxs)(n.p,{children:["The details of the security implementation are described ",(0,i.jsx)(n.a,{href:"https://github.com/tonkeeper/android/tree/main/apps/signer#security",children:"here"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"decoded-payload-preview",children:"Decoded payload preview"}),"\n",(0,i.jsx)(n.p,{children:"Allows you to decode and view the contents of a signed payload for the following cases:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"TON transfer with comment"}),"\n",(0,i.jsx)(n.li,{children:"NFT transfer"}),"\n",(0,i.jsx)(n.li,{children:"Jetton transfer"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"interfaces",children:"Interfaces"}),"\n",(0,i.jsx)(n.p,{children:"The app works offline and can be on the same device as other apps or on a separate device."}),"\n",(0,i.jsx)(n.p,{children:"Receiving and sending data can be done via:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"QR codes"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Deeplinks"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"protocol",children:"Protocol"}),"\n",(0,i.jsx)(n.h3,{id:"sign-the-transaction-from-tonkeeper--signer",children:"Sign the transaction (from Tonkeeper → Signer)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scheme"}),": ",(0,i.jsx)(n.code,{children:"tonsign://v1/"})]}),"\n",(0,i.jsx)(n.p,{children:"Parameters marked with an asterisk (*) are required."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"network"}),(0,i.jsx)(n.td,{children:"Network (ton, btc, tron20)"}),(0,i.jsx)(n.td,{children:"ton"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"pk*"}),(0,i.jsx)(n.td,{children:"Wallet public key in hex (to immediately select the one you need in Signer)"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"body*"}),(0,i.jsx)(n.td,{children:"Signature data in hex format. Send only body payload."}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"return"}),(0,i.jsx)(n.td,{children:"URL for returning a signed transaction. more details below. Its default search/query url param."}),(0,i.jsx)(n.td,{children:"Signer shows QR code if not specified."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"v"}),(0,i.jsx)(n.td,{children:"Wallet version TON (v3r1/v3r2/v4r2/v5r1). Using only for UI"}),(0,i.jsx)(n.td,{children:"v4r2"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"seqno"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"network"}),(0,i.jsx)(n.td,{children:"Ton network version: Mainnet = -239 Testnet = -3"}),(0,i.jsx)(n.td,{children:"-239"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Example link: ",(0,i.jsx)(n.code,{children:"tonsign://v1/?network=ton&pk=5a13667c677535f94d8b365c7952e3b63e069babf8133d93470f8dad8055626d&body=b5ee9c7241010101000a0000100000000000000000768999bf"}),(0,i.jsx)(n.br,{}),"\n","This URL must be included in the QR code."]}),"\n",(0,i.jsxs)(n.h4,{id:"parameter-return",children:["Parameter ",(0,i.jsx)(n.code,{children:"return"})]}),"\n",(0,i.jsx)(n.p,{children:"Used to direct the user back to the requester with a signed transaction."}),"\n",(0,i.jsxs)(n.p,{children:["Case: The user on the device opens wallet.tonkeeper.com and signs the transaction via Signer on the same device, he needs to be redirected back to the browser to the specified URL with an additional parameter boc. For example, return back to ",(0,i.jsx)(n.code,{children:"https://wallet.tonkeeper.com/?boc=hex"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Example link: ",(0,i.jsx)(n.code,{children:"tonsign://v1/?network=ton&pk=5a13667c677535f94d8b365c7952e3b63e069babf8133d93470f8dad8055626d&body=b5ee9c7241010101000a0000100000000000000000768999bf&return=https://wallet.tonkeeper.com/"})]}),"\n",(0,i.jsx)(n.h3,{id:"return-signed-transaction-signer--tonkeeper",children:"Return signed transaction (Signer → Tonkeeper)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scheme"}),": ",(0,i.jsx)(n.code,{children:"tonkeeper://publish"})," or ",(0,i.jsx)(n.code,{children:"https://app.tonkeeper.com/publish"})," if opening by click/direct redirect (mainly needed for iOS)"]}),"\n",(0,i.jsxs)(n.p,{children:["Web wallet use ",(0,i.jsx)(n.code,{children:"return"})," for interaction on one device. Doesn't need a special scheme."]}),"\n",(0,i.jsx)(n.p,{children:"Parameters marked with an asterisk (*) are required."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"sign*"}),(0,i.jsx)(n.td,{children:"Signature of transaction hash in hex. (Result from: PrivateKey.sign(body.hash) )"})]})})]}),"\n",(0,i.jsxs)(n.p,{children:["Example link: ",(0,i.jsx)(n.code,{children:"tonkeeper://publish?sign=9dfab96f555563f48a641c628ae74168d37f7da1745bfd3cbf1b6013cce5533c03ae59e87c8ebe0146c1d832b797020ac29ff6a1797e7ae7d4b61df89c34540f"}),(0,i.jsx)(n.br,{}),"\n","This URL must be included in the QR code."]}),"\n",(0,i.jsx)(n.h3,{id:"pairing-signer--tonkeeper",children:"Pairing (Signer → Tonkeeper)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scheme"}),": ",(0,i.jsx)(n.code,{children:"tonkeeper://signer/link"})," or ",(0,i.jsx)(n.code,{children:"https://app.tonkeeper.com/signer/link"})," if opening by click/direct redirection (mainly needed for iOS). For web: ",(0,i.jsx)(n.code,{children:"https://wallet.tonkeeper.com/signer/link"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Parameters marked with an asterisk (*) are required."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"network"}),(0,i.jsx)(n.td,{children:"Network (ton, btc, tron20)"}),(0,i.jsx)(n.td,{children:"ton"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"pk*"}),(0,i.jsx)(n.td,{children:"Wallet public key in hex"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"name"}),(0,i.jsx)(n.td,{children:"Key name as url safe string (substitute in the Tonkeeper name input field)"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"local"}),(0,i.jsx)(n.td,{children:"We pass true only to open Tonkeeper locally. This way we can determine that Tonkeeper is opened directly from Signer."}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Example link for app: ",(0,i.jsx)(n.code,{children:"tonkeeper://signer/link?pk=5a13667c677535f94d8b365c7952e3b63e069babf8133d93470f8dad8055626d&name=MyKey"}),"\nExample link for web: ",(0,i.jsx)(n.code,{children:"https://wallet.tonkeeper.com/signer/link?pk=5a13667c677535f94d8b365c7952e3b63e069babf8133d93470f8dad8055626d&name=MyKey"}),(0,i.jsx)(n.br,{}),"\n","This URL must be included in the QR code."]}),"\n",(0,i.jsx)(n.h3,{id:"qr-code-specification",children:"QR code specification"}),"\n",(0,i.jsxs)(n.p,{children:["Everything in the QR code should always begin with a diagram (",(0,i.jsx)(n.code,{children:"tonsign://"})," or ",(0,i.jsx)(n.code,{children:"tonkeeper://"}),"). This is necessary for proper processing of animation codes."]}),"\n",(0,i.jsx)(n.p,{children:"QR codes for Android:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Correction level: ",(0,i.jsx)(n.strong,{children:"M"})]}),"\n",(0,i.jsxs)(n.li,{children:["Max size: ",(0,i.jsx)(n.strong,{children:"256 characters"})]}),"\n",(0,i.jsxs)(n.li,{children:["Duration: ",(0,i.jsx)(n.strong,{children:"100ms per QR-code"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The camera in Android normally reads this size of each code at this speed."}),"\n",(0,i.jsx)(n.h3,{id:"interaction-diagram",children:"Interaction diagram"}),"\n",(0,i.jsx)(n.p,{children:"The follow diagrams shows the diagrams for connecting and signing a transaction via signer mobile application:"}),"\n",(0,i.jsx)(n.h4,{id:"deeplink-linking",children:"Deeplink linking"}),"\n",(0,i.jsx)(d.G,{chart:"%%{init: { 'sequence': {'messageAlign': 'left'} }}%%\nsequenceDiagram\n    actor User\n    participant Tonkeeper\n    participant Signer\n    participant Blockchain\n    \n    User->>Tonkeeper: press 'link wallet from signer' button\n    Tonkeeper->>Tonkeeper: generate linking deeplink\n    Tonkeeper->>Signer: open deeplink\n    Signer->>User: open select wallet screen\n    User->>Signer: select wallet, press \"link wallet\" button\n    Signer->>Signer: generate link deeplink <br> with WalletLinkResponse\n    Signer->>Tonkeeper: open deeplink <br> with WalletLinkResponse\n    Tonkeeper->>User: open add wallet flow\n    User->>Tonkeeper: confirm\n    Tonkeeper->>Tonkeeper: save wallet"}),"\n",(0,i.jsx)(n.h4,{id:"qr-code-linking",children:"QR Code linking"}),"\n",(0,i.jsx)(d.G,{chart:"%%{init: { 'sequence': {'messageAlign': 'left'} }}%%\nsequenceDiagram\n    actor User\n    participant Tonkeeper\n    participant Signer\n    participant Blockchain\n\n    User->>Signer: press 'link wallet' button\n    Signer->>Signer: generate QR code <br> with WalletLinkResponse\n    Signer->>User: show generated QR code\n    User->>Tonkeeper: scan Signer generated QR code\n    Tonkeeper->>Tonkeeper: parse QR code\n    Tonkeeper->>User: open add wallet flow\n    User->>Tonkeeper: confirm\n    Tonkeeper->>Tonkeeper: save wallet"}),"\n",(0,i.jsx)(n.h4,{id:"deeplink-signing",children:"Deeplink signing"}),"\n",(0,i.jsx)(d.G,{chart:"%%{init: { 'sequence': {'messageAlign': 'left'} }}%%\nsequenceDiagram\n    actor User\n    participant Tonkeeper\n    participant Signer\n    participant Blockchain\n\n    User->>Tonkeeper: press \"confirm and send\" button\n    Tonkeeper->>Tonkeeper: create transfer BoC\n    Tonkeeper->>Tonkeeper: generate sign transfer deeplink with SignTransferRequest\n    Tonkeeper->>Signer: open sign transfer deeplink with SignTransferRequest\n    Signer->>User: open confirmation screen\n    User->>Signer: press \"sign\" button\n    Signer->>Signer: sign BoC\n    Signer->>Signer: generate deeplink with <br> SignTransferResponse\n    Signer->>Tonkeeper: open deeplink with <br> SignTransferResponse\n    Tonkeeper->>Blockchain: send transfer BoC"}),"\n",(0,i.jsx)(n.h4,{id:"qr-code-signing",children:"QR code signing"}),"\n",(0,i.jsx)(d.G,{chart:"%%{init: { 'sequence': {'messageAlign': 'left'} }}%%\nsequenceDiagram\n    actor User\n    participant Tonkeeper\n    participant Signer\n    participant Blockchain\n\n    User->>Tonkeeper: press \"confirm and send\" button\n    Tonkeeper->>Tonkeeper: create transfer BoC\n    Tonkeeper->>Tonkeeper: generate sign transfer <br> QR code with <br> SignTransferRequest\n    Tonkeeper->>User: show generated sign <br> transfer QR code with <br> SignTransferRequest\n    User->>Signer: scan generated sign transfer QR code <br> with SignTransferRequest\n    Signer->>Signer: parse QR code with <br>SignTransferRequest\n    Signer->>User: open confirmation screen\n    User->>Signer: press \"sign\" button\n    Signer->>Signer: sign BoC\n    Signer->>Signer: generate QR code with <br>SignTransferResponse\n    Signer->>User: show generated <br> QR code with <br> SignTransferResponse\n    User->>Tonkeeper: scan generated QR code <br>with SignTransferResponse\n    Tonkeeper->>Blockchain: send transfer BoC"})]})}n.default=(0,s.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.a)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/tonkeeper/signer.mdx",route:"/tonkeeper/signer",timestamp:1724407575e3,title:"Signer",headings:c},pageNextRoute:"/tonkeeper/signer"})}},function(e){e.O(0,[5083,6997,9202,9774,2888,179],function(){return e(e.s=5431)}),_N_E=e.O()}]);